<!DOCTYPE html>
<!-- This is Chromecast sender -->
<html>
<head>
  <title>Random photos from nas</title>
  <meta charset="utf-8">
  <style type="text/css">
    @import 'http://twitter.github.io/typeahead.js/css/examples.css';
    .tt-dropdown-menu {
      max-height: 300px;
      overflow-y: auto;
    }
  </style>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
  <script type="text/javascript" src="http://photos.azib.net/chromecast.js"></script>
  <script type="text/javascript" src="http://twitter.github.io/typeahead.js/releases/0.10.2/typeahead.jquery.js"></script>
</head>
<body>
<div class="container">
  <div class="demo">
    Send random photos from nas to Chromecast!<br><br>

    <form>
      <input class="typeahead" type="text" name="prefix" value="" placeholder="2014" autofocus>
      <br>
      <button id="prev" type="button">Prev</button>
      <button id="next" type="button">Next</button>
    </form>
  </div>
</div>
</body>
<script type="text/javascript">
  chromecast.appId = '40FA4E04';
  $(function () {
    setTimeout(chromecast.launch, 1000);

    var input = $('[name=prefix]').typeahead({hint: true, highlight: true, minLength: 3}, {
      name: 'photo-dirs',
      displayKey: 'value',
      source: function (dir, cb) {
        $.get('/photos_dirs.php?dir=' + dir, function (data) {
          var values = data.trim().split('\n');
          cb($.map(values, function (value) {
            return {value: value}
          }));
        });
      }
    });

    input.on('typeahead:selected', function (e) {
      chromecast.message('dir:' + input.val());
    });

    $('#prev').on('click', function() {
      chromecast.message('prev');
    });

    $('#next').on('click', function() {
      chromecast.message('next');
    });
  });
</script>
</html>

